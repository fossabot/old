<template>
    <div class="container">
        <div class="loading">
            <LoadingOutlined class="loading-icon"></LoadingOutlined>
            <span>{{ loadingText }}</span>
            <v-btn v-if="isReload" class="mt-6" variant="flat" block @click="onReload">Reconnect</v-btn>
        </div>
    </div>
</template>
<script>
const currentWindow = window.require('@electron/remote').getCurrentWindow()
const { ipcRenderer } = window.require('electron')
import { LoadingOutlined } from '@ant-design/icons-vue';
export default {
    name: "MeetingLoading",
    components:{LoadingOutlined},
    props:["loadingText","isReload"],
    data(){
        return {
            status: "",
            statusText: ""
        }
    },
    mounted(){
        ipcRenderer.on("onUserCloseWindow", this.onRequestCloseWindows)
    },
    beforeUnmount(){
        ipcRenderer.removeListener("onUserCloseWindow", this.onRequestCloseWindows)
    },
    methods:{
        onReload(){
            currentWindow?.reload()
        },
        onRequestCloseWindows(){
            ipcRenderer.send("onLeaveMeeting")
        }
    }
}
</script>
<style lang="scss" scoped>
    .container{
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
        .loading{
            padding: 15px 30px;
            background: rgba(26, 26, 26, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 12px;
            .loading-icon{
                display: block;
                font-size: 80px;
                color: white;
                margin-bottom: 20px;
            }
        }
    }
</style>